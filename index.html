<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MDed</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="build/atom-one-dark.min.css">
</head>
<body>
  <div class="app">
    <div class="titlebar">
      <div class="titlebar-drag">
        <button class="btn-icon-sm" id="toggle-sidebar-btn" title="Toggle Sidebar">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="9" y1="3" x2="9" y2="21"></line>
          </svg>
        </button>
        <span class="app-title">MDed</span>
        <span id="save-indicator" class="save-indicator">Saved</span>
      </div>
      <div class="window-controls">
        <button class="window-btn" id="shortcuts-btn" title="Keyboard Shortcuts (Ctrl+/)">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="4" width="20" height="16" rx="2" ry="2"></rect>
            <line x1="6" y1="8" x2="6.01" y2="8"></line>
            <line x1="10" y1="8" x2="10.01" y2="8"></line>
            <line x1="14" y1="8" x2="14.01" y2="8"></line>
            <line x1="18" y1="8" x2="18.01" y2="8"></line>
            <line x1="8" y1="12" x2="16" y2="12"></line>
          </svg>
        </button>
        <button class="window-btn" id="minimal-mode-btn" title="Minimal Mode (Always on Top)">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
          </svg>
        </button>
        <button class="window-btn" id="minimize-btn">
          <svg width="12" height="12" viewBox="0 0 12 12">
            <line x1="1" y1="6" x2="11" y2="6" stroke="currentColor" stroke-width="1.5"/>
          </svg>
        </button>
        <button class="window-btn" id="maximize-btn">
          <svg width="12" height="12" viewBox="0 0 12 12">
            <rect x="2" y="2" width="8" height="8" fill="none" stroke="currentColor" stroke-width="1.5"/>
          </svg>
        </button>
        <button class="window-btn close" id="close-btn">
          <svg width="12" height="12" viewBox="0 0 12 12">
            <line x1="2" y1="2" x2="10" y2="10" stroke="currentColor" stroke-width="1.5"/>
            <line x1="10" y1="2" x2="2" y2="10" stroke="currentColor" stroke-width="1.5"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="main-content">
      <div class="sidebar glass">
        <div class="sidebar-section">
          <div class="sidebar-header">
            <h2>Folders</h2>
            <button class="btn-icon-sm" id="new-folder-btn" title="New Folder">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
          </div>
          <div class="folders-list" id="folders-list"></div>
        </div>
        
        <div class="sidebar-section flex-1">
          <div class="sidebar-header">
            <h2>Notes</h2>

            <button class="btn-icon" id="new-note-btn" title="New Note">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
          </div>
          <div class="search-container">
            <input type="text" id="search-input" placeholder="Search notes..." class="search-input">
          </div>
          <div class="notes-list" id="notes-list"></div>
        </div>
      </div>

      <div class="editor-container">
        <div class="editor-header glass">
          <div class="toolbar">
            <button class="btn-icon toolbar-btn" id="undo-btn" title="Undo (Ctrl+Z)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 7v6h6"></path>
                <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path>
              </svg>
            </button>
            <button class="btn-icon toolbar-btn" id="redo-btn" title="Redo (Ctrl+Y)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 7v6h-6"></path>
                <path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"></path>
              </svg>
            </button>
            <div class="toolbar-divider"></div>
            <button class="btn-icon toolbar-btn" data-action="bold" title="Bold (Ctrl+B)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"/>
              </svg>
            </button>
            <button class="btn-icon toolbar-btn" data-action="italic" title="Italic (Ctrl+I)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"/>
              </svg>
            </button>
            <button class="btn-icon toolbar-btn" data-action="heading" title="Heading">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 4v7m0 0v9m0-9h12m0-7v7m0 0v9"/>
              </svg>
            </button>
            <button class="btn-icon toolbar-btn" data-action="link" title="Link (Ctrl+K)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
              </svg>
            </button>
            <button class="btn-icon toolbar-btn" data-action="code" title="Code">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="16 18 22 12 16 6"></polyline>
                <polyline points="8 6 2 12 8 18"></polyline>
              </svg>
            </button>
            <button class="btn-icon toolbar-btn" data-action="ul" title="Bullet List">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="8" y1="6" x2="21" y2="6"></line>
                <line x1="8" y1="12" x2="21" y2="12"></line>
                <line x1="8" y1="18" x2="21" y2="18"></line>
                <line x1="3" y1="6" x2="3.01" y2="6"></line>
                <line x1="3" y1="12" x2="3.01" y2="12"></line>
                <line x1="3" y1="18" x2="3.01" y2="18"></line>
              </svg>
            </button>
            <button class="btn-icon toolbar-btn" data-action="ol" title="Numbered List">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="10" y1="6" x2="21" y2="6"></line>
                <line x1="10" y1="12" x2="21" y2="12"></line>
                <line x1="10" y1="18" x2="21" y2="18"></line>
                <path d="M4 6h1v4"></path>
                <path d="M4 10h2"></path>
                <path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"></path>
              </svg>
            </button>
            <button class="btn-icon toolbar-btn" data-action="todo" title="Checklist">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="5" width="6" height="6" rx="1" ry="1"></rect>
                <path d="M13 8h7"></path>
                <rect x="3" y="14" width="6" height="6" rx="1" ry="1"></rect>
                <path d="M13 17h7"></path>
              </svg>
            </button>
            <div class="toolbar-divider"></div>
            <button class="btn-icon toolbar-btn" id="copy-note-btn" title="Copy Note (Plain Text)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
            </button>
          </div>
          <div class="editor-actions">
            <button class="btn-toggle" id="toggle-preview">
              <span class="toggle-label" id="mode-label">Preview</span>
            </button>
            <button class="btn-icon" id="delete-note-btn" title="Delete Note">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              </svg>
            </button>
          </div>
        </div>

        <div class="editor-area glass">
          <textarea class="editor" id="editor" placeholder="Start writing..."></textarea>
          <div class="preview" id="preview"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Keyboard Shortcuts Modal -->
  <div class="modal-overlay" id="shortcuts-modal">
    <div class="modal glass">
      <div class="modal-header">
        <h2>Keyboard Shortcuts</h2>
        <button class="btn-icon-sm" id="shortcuts-close">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="shortcut-section" style="margin-bottom: 24px; padding-bottom: 16px; border-bottom: 1px solid rgba(255,255,255,0.1);">
          <h3>Configuration</h3>
          <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 10px;">
            <div style="font-size: 13px; color: var(--text-secondary);">Global Toggle Shortcut</div>
            <div style="display: flex; gap: 8px;">
               <div id="shortcut-display" style="padding: 6px 12px; background: rgba(0,0,0,0.3); border-radius: 6px; font-family: monospace; font-size: 12px; min-width: 120px; text-align: center; border: 1px solid rgba(255,255,255,0.1);">Loading...</div>
               <button id="record-shortcut-btn" class="btn-toggle" style="min-width: 80px;">Record</button>
            </div>
          </div>
          <div style="font-size: 11px; color: var(--text-quaternary); margin-top: 8px;">
            Click Record and press your desired key combination.
          </div>
        </div>
        <div class="shortcut-section">
          <h3>General</h3>
          <div class="shortcut-row"><kbd>Ctrl</kbd>+<kbd>S</kbd><span>Save note</span></div>
          <div class="shortcut-row"><kbd>Ctrl</kbd>+<kbd>N</kbd><span>New note</span></div>
          <div class="shortcut-row"><kbd>Ctrl</kbd>+<kbd>E</kbd><span>Toggle preview</span></div>
          <div class="shortcut-row"><kbd>Ctrl</kbd>+<kbd>/</kbd><span>Show shortcuts</span></div>
          <div class="shortcut-row"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>N</kbd><span>Global: Show app</span></div>
        </div>
        <div class="shortcut-section">
          <h3>Formatting</h3>
          <div class="shortcut-row"><kbd>Ctrl</kbd>+<kbd>B</kbd><span>Bold</span></div>
          <div class="shortcut-row"><kbd>Ctrl</kbd>+<kbd>I</kbd><span>Italic</span></div>
          <div class="shortcut-row"><kbd>Ctrl</kbd>+<kbd>K</kbd><span>Link</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Folder Modal -->
  <div class="modal-overlay" id="create-folder-modal">
    <div class="modal glass">
      <div class="modal-header">
        <h2>New Folder</h2>
        <button class="btn-icon-sm" id="create-folder-close">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <input type="text" id="create-folder-input" placeholder="Folder Name" class="search-input" style="margin-bottom: 16px;">
        <div style="display: flex; justify-content: flex-end; gap: 8px;">
          <button class="btn-toggle" id="create-folder-cancel">Cancel</button>
          <button class="btn-toggle active" id="create-folder-confirm">Create</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Rename Modal -->
  <div class="modal-overlay" id="rename-modal">
    <div class="modal glass">
      <div class="modal-header">
        <h2 id="rename-modal-title">Rename</h2>
        <button class="btn-icon-sm" id="rename-close">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <input type="text" id="rename-input" placeholder="New Name" class="search-input" style="margin-bottom: 16px;">
        <div style="display: flex; justify-content: flex-end; gap: 8px;">
          <button class="btn-toggle" id="rename-cancel">Cancel</button>
          <button class="btn-toggle active" id="rename-confirm">Rename</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Confirm Modal -->
  <div class="modal-overlay" id="confirm-modal">
    <div class="modal glass">
      <div class="modal-header">
        <h2 id="confirm-modal-title">Confirm Action</h2>
        <button class="btn-icon-sm" id="confirm-close">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <p id="confirm-modal-message" style="margin-bottom: 20px; color: var(--text-secondary);">Are you sure?</p>
        <div style="display: flex; justify-content: flex-end; gap: 8px;">
          <button class="btn-toggle" id="confirm-cancel">Cancel</button>
          <button class="btn-toggle" id="confirm-ok" style="background: rgba(248, 113, 113, 0.2); color: #f87171;">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <script src="build/marked.min.js"></script>
  <script src="build/highlight.min.js"></script>
  <script src="dist/renderer/app.js"></script>
</body>
</html>
